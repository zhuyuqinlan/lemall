<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zhuyuqinlan.lemall.business.admin.order.mapper.OmsOrderReturnApplyMapper">
  <resultMap id="BaseResultMap" type="org.zhuyuqinlan.lemall.common.entity.OmsOrderReturnApply">
    <!--@mbg.generated-->
    <!--@Table oms_order_return_apply-->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="order_id" jdbcType="BIGINT" property="orderId" />
    <result column="company_address_id" jdbcType="BIGINT" property="companyAddressId" />
    <result column="product_id" jdbcType="BIGINT" property="productId" />
    <result column="order_sn" jdbcType="VARCHAR" property="orderSn" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="member_username" jdbcType="VARCHAR" property="memberUsername" />
    <result column="return_amount" jdbcType="DECIMAL" property="returnAmount" />
    <result column="return_name" jdbcType="VARCHAR" property="returnName" />
    <result column="return_phone" jdbcType="VARCHAR" property="returnPhone" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="handle_time" jdbcType="TIMESTAMP" property="handleTime" />
    <result column="product_pic" jdbcType="VARCHAR" property="productPic" />
    <result column="product_name" jdbcType="VARCHAR" property="productName" />
    <result column="product_brand" jdbcType="VARCHAR" property="productBrand" />
    <result column="product_attr" jdbcType="VARCHAR" property="productAttr" />
    <result column="product_count" jdbcType="INTEGER" property="productCount" />
    <result column="product_price" jdbcType="DECIMAL" property="productPrice" />
    <result column="product_real_price" jdbcType="DECIMAL" property="productRealPrice" />
    <result column="reason" jdbcType="VARCHAR" property="reason" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="proof_pics" jdbcType="VARCHAR" property="proofPics" />
    <result column="handle_note" jdbcType="VARCHAR" property="handleNote" />
    <result column="handle_man" jdbcType="VARCHAR" property="handleMan" />
    <result column="receive_man" jdbcType="VARCHAR" property="receiveMan" />
    <result column="receive_time" jdbcType="TIMESTAMP" property="receiveTime" />
    <result column="receive_note" jdbcType="VARCHAR" property="receiveNote" />
  </resultMap>
  <resultMap id="returnApplyDetailResultMap" type="org.zhuyuqinlan.lemall.business.admin.order.dto.response.OmsOrderReturnApplyResultResponseDTO" extends="BaseResultMap">
    <association property="companyAddress" resultMap="org.zhuyuqinlan.lemall.business.admin.order.mapper.OmsCompanyAddressMapper.BaseResultMap" columnPrefix="ca_"/>
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    id, order_id, company_address_id, product_id, order_sn, create_time, member_username, 
    return_amount, return_name, return_phone, `status`, handle_time, product_pic, product_name, 
    product_brand, product_attr, product_count, product_price, product_real_price, reason, 
    description, proof_pics, handle_note, handle_man, receive_man, receive_time, receive_note
  </sql>

  <select id="getDetail" resultMap="returnApplyDetailResultMap">
      SELECT ra.*,
             ca.id             as ca_id,
             ca.address_name   as ca_address_name,
             ca.`name`         as ca_name,
             ca.phone          as ca_phone,
             ca.province       as ca_province,
             ca.city           as ca_city,
             ca.region         as ca_region,
             ca.detail_address as ca_detail_address
      FROM oms_order_return_apply ra
               LEFT JOIN oms_company_address ca ON ra.company_address_id = ca.id
      WHERE ra.id = #{id};
  </select>
</mapper>